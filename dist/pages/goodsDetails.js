"use strict";function _classCallCheck(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function _createClass(s,t,o){return t&&_defineProperties(s.prototype,t),o&&_defineProperties(s,o),s}require(["../scripts/config"],function(){require(["jquery","template","swiper","jquery.cookie"],function(a,c,r){a("#header").load("./commonHtml/head.html",function(){a.ajax({url:"https://dms-dataapi.meizu.com/data/jsdata.jsonp?blockIds=266",dataType:"jsonp",success:function(s){var t=s.block_266[0].node,o=a("<div class='temp'></div>");a("body").append(o),a(o).load("./templates/index_shopList_template.html",function(){var s=c("shopList",{shopList:t});a(".storeLeft dl").append(s)}),a(".shopCar").hover(function(){a(".shopCarList").stop().show(),a(this).css("color","#CCCCCC")},function(){a(".shopCarList").stop().hide(),a(this).css("color","#666666")}),a(".header-r .msg").hover(function(){a(".msgList").stop().show(),a(this).css("color","#CCCCCC")},function(){a(".msgList").stop().hide(),a(this).css("color","#666666")}),a(".navTitle li").on("mouseenter",function(s){a(this).children().addClass("active").parent().siblings().children().removeClass("active"),a(this).hasClass("shop")&&a(".shopList").stop().show(200),a(this).hasClass("magazine")&&a(".magazineList").stop().show(100),a(this).hasClass("share")&&a(".shareList").stop().show(100)}),a(".navTitle li").on("mouseleave",function(s){a(this).children().removeClass("active"),a(this).hasClass("shop")&&a(".shopList").stop().hide(200),a(this).hasClass("magazine")&&a(".magazineList").stop().hide(),a(this).hasClass("share")&&a(".shareList").stop().hide()}),a(".noOffmenu").click(function(s){a(".search-input").stop().animate({width:"toggle"},350),s.stopPropagation()}),a(".search-input .txt").change(function(){""==a(this).val()?a(".noOffmenu").css("display","block"):a(".noOffmenu").css("display","none")})}})}),a("#footer").load("./commonHtml/foot.html",function(){a("#service a").mouseenter(function(){var s=4,t=10,o=setInterval(function(){s--,a(".hand").stop().animate({left:t},300),t=-t,0==s&&clearInterval(o)},300)}),a(".download").hover(function(){a(".QR_code").stop().show()},function(){a(".QR_code").stop().hide()}),a(".icon-weixin").hover(function(){a(".weixin").stop().show()},function(){a(".weixin").stop().hide()})}),a.ajax({type:"get",dataType:"jsonp",url:"https://dms-dataapi.meizu.com/data/jsdata.jsonp?blockIds=266",success:function(s){var t=s.block_266[1].node,o=window.location.href,e=parseInt(o.split("?userid=")[1]).toString(),i=a.grep(t,function(s,t){return s.skuid==e}),n=a("<div class='tempgoods'></div>");a("body").append(n),a(n).load("./templates/goodsDetails_goodsDetails_template.html",function(){var s=c("goods",{goods:i[0]});a(".main-left").append(s),function(){new r(".swiper-container",{autoplay:{disableOnInteraction:!1},loop:!0,pagination:{el:".swiper-pagination",clickable:!0,bulletActiveClass:"my-bullet-active",renderBullet:function(s,t){return'<span class="'.concat(t,'"><img src="../static/images/good').concat(s+1,'.jpg " /></span>')}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});a(".colorList").on("click",".list",function(){a(this).addClass("click").siblings().removeClass("click")}),a(".count .jian").click(function(s){s.preventDefault();var t=parseInt(a(".count .num").html());t--,a(".count .num").html(Math.max(1,t))}),a(".count .jia").click(function(s){s.preventDefault();var t=parseInt(a(".count .num").html());t++,a(".count .num").html(t)})}(),new l(t)}),a(n).load("./templates/goodsDetails_like_template.html",function(){var s=c("goodsLikeList",{likeList:t});a(".main-right ul").append(s)})}});var l=function(){function t(s){_classCallCheck(this,t),a.cookie.raw=!0,this.dataList=s,this.addCar=a(".addCar"),this.addEvent()}return _createClass(t,[{key:"addEvent",value:function(){var s=this;this.addCar.click(function(){s.goodsId=a(this).attr("goodsId"),s.num=parseInt(a(".count .num").html()),s.p=a(".price b").html(),s.price=parseInt(s.p.substring(1)),s.setCookie(),a("#addCarSuccess").show(),a(".pop h3 span").click(function(){a("#addCarSuccess").hide()})})}},{key:"setCookie",value:function(){if(this.goods=a.cookie("goods")?JSON.parse(a.cookie("goods")):[],this.goods.length<1)this.goods.push({goodsId:this.goodsId,num:this.num,price:this.price});else{var o=this,e=!0;a.each(this.goods,function(s,t){t.goodsId==o.goodsId&&(o.goods[s].num+=o.num,e=!1)}),e&&(this.goods.push({goodsId:this.goodsId,num:this.num,price:this.price}),e=!0)}a.cookie("goods",JSON.stringify(this.goods))}}]),t}()})});